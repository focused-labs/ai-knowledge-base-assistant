<!DOCTYPE html>
<html lang="en"><head>
<meta charset="utf-8"/>
<title>A Tight Schedule: Spring, Kubernetes, and Scheduled Jobs</title>
<link href="https://focusedlabs.io/hubfs/focusedlabs-favicon.png" rel="shortcut icon"/>
<meta content="Here we explore the challenges of running scheduled jobs in a Spring and Kubernetes environment, including duplicate job runs and queuing of jobs." name="description"/>
<link href="https://focusedlabs.io/hs-fs/hub/5845897/hub_generated/template_assets/93421951526/1686607647092/FocusedLabs_November_2022/css/templates/_blog.min.css" rel="stylesheet" type="text/css"/>
<script>
      var show = localStorage.getItem('show');
      if(show === 'true'){
        document.documentElement.classList.add('dark');
      } 
    </script>
<script src="/hs/hsstatic/jquery-libs/static-1.4/jquery/jquery-1.11.2.js"></script>
<script>hsjQuery = window['jQuery'];</script>
<meta content="Here we explore the challenges of running scheduled jobs in a Spring and Kubernetes environment, including duplicate job runs and queuing of jobs." property="og:description"/>
<meta content="A Tight Schedule: Spring, Kubernetes, and Scheduled Jobs" property="og:title"/>
<meta content="Here we explore the challenges of running scheduled jobs in a Spring and Kubernetes environment, including duplicate job runs and queuing of jobs." name="twitter:description"/>
<meta content="A Tight Schedule: Spring, Kubernetes, and Scheduled Jobs" name="twitter:title"/>
<style>
a.cta_button{-moz-box-sizing:content-box !important;-webkit-box-sizing:content-box !important;box-sizing:content-box !important;vertical-align:middle}.hs-breadcrumb-menu{list-style-type:none;margin:0px 0px 0px 0px;padding:0px 0px 0px 0px}.hs-breadcrumb-menu-item{float:left;padding:10px 0px 10px 10px}.hs-breadcrumb-menu-divider:before{content:'›';padding-left:10px}.hs-featured-image-link{border:0}.hs-featured-image{float:right;margin:0 0 20px 20px;max-width:50%}@media (max-width: 568px){.hs-featured-image{float:none;margin:0;width:100%;max-width:100%}}.hs-screen-reader-text{clip:rect(1px, 1px, 1px, 1px);height:1px;overflow:hidden;position:absolute !important;width:1px}
</style>
<link href="https://focusedlabs.io/hs-fs/hub/5845897/hub_generated/template_assets/93429468540/1694708451506/FocusedLabs_November_2022/css/main.min.css" rel="stylesheet"/>
<link href="https://focusedlabs.io/hs-fs/hub/5845897/hub_generated/template_assets/93421951529/1690380436362/FocusedLabs_November_2022/css/theme-overrides.min.css" rel="stylesheet"/>
<link href="//fonts.googleapis.com/css2?family=DM+Mono&amp;display=swap" rel="stylesheet"/>
<style>
</style>
<script type="application/ld+json">
{
  "mainEntityOfPage" : {
    "@type" : "WebPage",
    "@id" : "https://focusedlabs.io/blog/a-tight-schedule-spring-kubernetes-and-scheduled-jobs"
  },
  "author" : {
    "name" : "Travis Pennetti",
    "url" : "https://focusedlabs.io/blog/author/travis-pennetti",
    "@type" : "Person"
  },
  "headline" : "A Tight Schedule: Spring, Kubernetes, and Scheduled Jobs",
  "datePublished" : "2023-02-23T22:19:58.000Z",
  "dateModified" : "2023-03-03T15:08:36.796Z",
  "publisher" : {
    "name" : "Focused Labs",
    "logo" : {
      "url" : "https://5845897.fs1.hubspotusercontent-na1.net/hubfs/5845897/FL%20Logo%20Mode=Light.png",
      "@type" : "ImageObject"
    },
    "@type" : "Organization"
  },
  "@context" : "https://schema.org",
  "@type" : "BlogPosting",
  "image" : [ "https://5845897.fs1.hubspotusercontent-na1.net/hubfs/5845897/Imported%20sitepage%20images/AbdJxVI4J-UdUXhPWvxR38lsksbyio5b9r9MqkNhn_Sy0jvb-FG-rWdr8Q_pfS3XHGmxBh5cqgfWPY_CtYHhUWP7kA-NUp_PEJa_shZItRZ4mNYLq7eNAoDxPcTeuBInZyC9fs1cuCCjWP6vvNbBE.png" ]
}
</script>
<!--  Added by GoogleAnalytics4 integration -->
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}

if (!window._hsGoogleConsentRunOnce) {
  window._hsGoogleConsentRunOnce = true;

  gtag('consent', 'default', {
    'ad_storage': 'denied',
    'analytics_storage': 'denied'
  });

  var _hsp = window._hsp = window._hsp || [];

  _hsp.push(['addPrivacyConsentListener', function(consent){
    var hasAnalyticsConsent = consent && (consent.allowed || (consent.categories && consent.categories.analytics));
    var hasAdsConsent = consent && (consent.allowed || (consent.categories && consent.categories.advertisement));

    gtag('consent', 'update', {
      'ad_storage': hasAdsConsent ? 'granted' : 'denied',
      'analytics_storage': hasAnalyticsConsent ? 'granted' : 'denied'
    });
  }]);
}

gtag('js', new Date());
gtag('set', 'developer_id.dZTQ1Zm', true);
gtag('config', 'G-3W4SF8W0DX');
</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-3W4SF8W0DX"></script>
<!-- /Added by GoogleAnalytics4 integration -->
<!--  Added by GoogleTagManager integration -->
<script>
var _hsp = window._hsp = window._hsp || [];

var hsLoadGtm = function loadGtm() {
    if(window._hsGtmLoadOnce) {
      return;
    }

    (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-NFKNBDPP');

    window._hsGtmLoadOnce = true;
};

var useGoogleConsentMode = false;

if (!useGoogleConsentMode){
    _hsp.push(['addPrivacyConsentListener', function(consent){
      if(consent.allowed || (consent.categories && consent.categories.analytics)){
        hsLoadGtm();
      }
  }]);
} else{
    if(!window._hsGoogleConsentRunOnce){
      window._hsGoogleConsentRunOnce=true;

      window.dataLayer=window.dataLayer||[];
      function gtag(){dataLayer.push(arguments);}

      gtag('consent','default',{
        'ad_storage':'denied',
        'analytics_storage':'denied'
      });

      gtag('set','developer_id.dZTQ1Zm',true);

      _hsp.push(['addPrivacyConsentListener',function(consent){
      var hasAnalyticsConsent=consent&&(consent.allowed||(consent.categories&&consent.categories.analytics));
      var hasAdsConsent=consent&&(consent.allowed||(consent.categories&&consent.categories.advertisement));

      gtag('consent','update',{
        'ad_storage':hasAdsConsent?'granted':'denied',
        'analytics_storage':hasAnalyticsConsent?'granted':'denied'
      });
    }]);
  }

  hsLoadGtm();
}
</script>
<!-- /Added by GoogleTagManager integration -->
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-NFKNBDPP');</script>
<!-- End Google Tag Manager -->
<script type="text/javascript">
window.__lo_site_id = 330223;

	(function() {
		var wa = document.createElement('script'); wa.type = 'text/javascript'; wa.async = true;
		wa.src = 'https://d10lpsik1i8c69.cloudfront.net/w.js';
		var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(wa, s);
	  })();
	</script>
<link href="https://focusedlabs.io/blog/a-tight-schedule-spring-kubernetes-and-scheduled-jobs?hs_amp=true" rel="amphtml"/>
<meta content="https://focusedlabs.io/hubfs/Imported%20sitepage%20images/AbdJxVI4J-UdUXhPWvxR38lsksbyio5b9r9MqkNhn_Sy0jvb-FG-rWdr8Q_pfS3XHGmxBh5cqgfWPY_CtYHhUWP7kA-NUp_PEJa_shZItRZ4mNYLq7eNAoDxPcTeuBInZyC9fs1cuCCjWP6vvNbBE.png#keepProtocol" property="og:image"/>
<meta content="1600" property="og:image:width"/>
<meta content="584" property="og:image:height"/>
<meta content="https://focusedlabs.io/hubfs/Imported%20sitepage%20images/AbdJxVI4J-UdUXhPWvxR38lsksbyio5b9r9MqkNhn_Sy0jvb-FG-rWdr8Q_pfS3XHGmxBh5cqgfWPY_CtYHhUWP7kA-NUp_PEJa_shZItRZ4mNYLq7eNAoDxPcTeuBInZyC9fs1cuCCjWP6vvNbBE.png#keepProtocol" name="twitter:image"/>
<meta content="https://focusedlabs.io/blog/a-tight-schedule-spring-kubernetes-and-scheduled-jobs" property="og:url"/>
<meta content="summary_large_image" name="twitter:card"/>
<link href="https://focusedlabs.io/blog/a-tight-schedule-spring-kubernetes-and-scheduled-jobs" rel="canonical"/>
<meta content="article" property="og:type"/>
<link href="https://focusedlabs.io/blog/rss.xml" rel="alternate" type="application/rss+xml"/>
<meta content="focusedlabs.io" name="twitter:domain"/>
<meta content="@BuildWithFocus" name="twitter:site"/>
<script src="//platform.linkedin.com/in.js" type="text/javascript">
    lang: en_US
</script>
<meta content="en" http-equiv="content-language"/>
<meta content="HubSpot" name="generator"/></head>
<body>
<!--  Added by GoogleTagManager integration -->
<noscript><iframe height="0" src="https://www.googletagmanager.com/ns.html?id=GTM-NFKNBDPP" style="display:none;visibility:hidden" width="0"></iframe></noscript>
<!-- /Added by GoogleTagManager integration -->
<div class="body-wrapper hs-content-id-103693724996 hs-blog-post hs-blog-id-93617369930">
<div data-global-resource-path="FocusedLabs_November_2022/templates/partials/header.html"><header class="header">
<a class="header__skip" href="#main-content">Skip to content</a>
<div class="header_container">
<div class="container">
<div class="header_row">
<div class="header_logo">
<div class="light_image">
<div class="hs_cos_wrapper hs_cos_wrapper_widget hs_cos_wrapper_type_module widget-type-logo" data-hs-cos-general-type="widget" data-hs-cos-type="module" id="hs_cos_wrapper_light_logo" style="">
<span class="hs_cos_wrapper hs_cos_wrapper_widget hs_cos_wrapper_type_logo" data-hs-cos-general-type="widget" data-hs-cos-type="logo" id="hs_cos_wrapper_light_logo_hs_logo_widget" style=""><a href="/" id="hs-link-light_logo_hs_logo_widget" style="border-width:0px;border:0px;"><img alt="Focused Labs" class="hs-image-widget" height="377" src="https://focusedlabs.io/hubfs/raw_assets/public/FocusedLabs_November_2022/images/logo.svg" style="height: auto;width:0px;border-width:0px;border:0px;" title="Focused Labs" width="0"/></a></span>
</div>
</div>
<div class="dark_image">
<div class="hs_cos_wrapper hs_cos_wrapper_widget hs_cos_wrapper_type_module widget-type-logo" data-hs-cos-general-type="widget" data-hs-cos-type="module" id="hs_cos_wrapper_dark_logo" style="">
<span class="hs_cos_wrapper hs_cos_wrapper_widget hs_cos_wrapper_type_logo" data-hs-cos-general-type="widget" data-hs-cos-type="logo" id="hs_cos_wrapper_dark_logo_hs_logo_widget" style=""><a href="/" id="hs-link-dark_logo_hs_logo_widget" style="border-width:0px;border:0px;"><img alt="Focused Labs" class="hs-image-widget" height="377" src="https://focusedlabs.io/hubfs/raw_assets/public/FocusedLabs_November_2022/images/light_logo.svg" style="height: auto;width:0px;border-width:0px;border:0px;" title="Focused Labs" width="0"/></a></span>
</div>
</div>
<div class="mobile_trigger">
<span aria-hidden="true"></span>
<span aria-hidden="true"></span>
<span aria-hidden="true"></span>
</div>
</div>
<div class="header_menu">
<div class="custom_menu_primary">
<span class="hs_cos_wrapper hs_cos_wrapper_widget hs_cos_wrapper_type_menu" data-hs-cos-general-type="widget" data-hs-cos-type="menu" id="hs_cos_wrapper_menu" style=""><div aria-label="Navigation Menu" class="hs-menu-wrapper active-branch no-flyouts hs-menu-flow-horizontal" data-menu-id="93449046703" data-sitemap-name="default" id="hs_menu_wrapper_menu" role="navigation">
<ul role="menu">
<li class="hs-menu-item hs-menu-depth-1" role="none"><a href="https://focusedlabs.io/about" role="menuitem">About</a></li>
<li class="hs-menu-item hs-menu-depth-1" role="none"><a href="https://focusedlabs.io/services" role="menuitem">Services</a></li>
<li class="hs-menu-item hs-menu-depth-1" role="none"><a href="https://focusedlabs.io/blog" role="menuitem">Blog</a></li>
<li class="hs-menu-item hs-menu-depth-1" role="none"><a href="https://focusedlabs.io/careers" role="menuitem">Careers</a></li>
<li class="hs-menu-item hs-menu-depth-1" role="none"><a href="https://focusedlabs.io/contact" role="menuitem">Contact</a></li>
</ul>
</div></span>
</div>
</div>
<div class="mb_menu_wrp">
<div class="mb_menu">
</div>
<div class="mode_toggle">
<div class="mod_togl_trigger">
<svg class="mr-2 light_icon" fill="none" height="12" width="12" xmlns="http://www.w3.org/2000/svg"><path d="M6 8.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM6 .5v1M6 10.5v1M2.11 2.11l.71.71M9.18 9.18l.71.71M.5 6h1M10.5 6h1M2.11 9.89l.71-.71M9.18 2.82l.71-.71" stroke="#2B2340" stroke-linecap="round" stroke-linejoin="round" stroke-opacity="0.7"></path></svg>
<svg class="mr-2 dark_icon" fill="none" height="10" width="10" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 5.395A4.5 4.5 0 1 1 4.605.5 3.5 3.5 0 0 0 9.5 5.395Z" stroke="#F4E8FF" stroke-linecap="round" stroke-linejoin="round" stroke-opacity="0.7"></path></svg>
<div class="mode_toggle_inr">
<label id="toggle-header-menu-label">
</label>
</div>
</div>
</div>
</div>
<div class="mb_menu_imge_wrp">
<div class="mb_menu_imge">
<div class="hs_cos_wrapper hs_cos_wrapper_widget hs_cos_wrapper_type_module widget-type-linked_image" data-hs-cos-general-type="widget" data-hs-cos-type="module" id="hs_cos_wrapper_Menu_bg" style="">
<span class="hs_cos_wrapper hs_cos_wrapper_widget hs_cos_wrapper_type_linked_image" data-hs-cos-general-type="widget" data-hs-cos-type="linked_image" id="hs_cos_wrapper_Menu_bg_" style=""><img alt="Accent" class="hs-image-widget" src="https://focusedlabs.io/hubfs/raw_assets/public/FocusedLabs_November_2022/images/menu_bg.png" style="width:0px;border-width:0px;border:0px;" title="Accent" width="0"/></span></div>
</div>
</div>
<div class="header_right">
<div class="mode_toggle mob_toggle">
<div class="mod_togl_trigger">
<svg class="mr-2 light_icon" fill="none" height="12" width="12" xmlns="http://www.w3.org/2000/svg"><path d="M6 8.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM6 .5v1M6 10.5v1M2.11 2.11l.71.71M9.18 9.18l.71.71M.5 6h1M10.5 6h1M2.11 9.89l.71-.71M9.18 2.82l.71-.71" stroke="#2B2340" stroke-linecap="round" stroke-linejoin="round" stroke-opacity="0.7"></path></svg>
<svg class="mr-2 dark_icon" fill="none" height="10" width="10" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 5.395A4.5 4.5 0 1 1 4.605.5 3.5 3.5 0 0 0 9.5 5.395Z" stroke="#F4E8FF" stroke-linecap="round" stroke-linejoin="round" stroke-opacity="0.7"></path></svg>
<div class="mode_toggle_inr">
<label id="toggle-header-menu-label">
</label>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</header></div>
<main class="body-container-wrapper" id="main-content">
<div class="body-container body-container--blog-post">
<div class="blog_post_wrapper">
<div class="post_inner">
<div class="post_bnr_wrp">
<div class="post_bnr">
<a href="https://focusedlabs.io/blog">
<svg class="mb_back" fill="none" height="40" viewbox="0 0 40 40" width="40" xmlns="http://www.w3.org/2000/svg"><path d="M31.6668 20H8.3335" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="3"></path><path d="M20.0002 31.6668L8.3335 20.0002L20.0002 8.3335" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="3"></path></svg>
<p>
                Blog
              </p>
</a>
<div class="post_bnr_icon">
<a href="https://focusedlabs.io/blog">
<svg fill="none" height="40" viewbox="0 0 40 40" width="40" xmlns="http://www.w3.org/2000/svg">
<path d="M31.6668 20H8.3335" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="3"></path>
<path d="M20.0002 31.6668L8.3335 20.0002L20.0002 8.3335" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="3"></path>
</svg>
</a>
<div class="post_bnr_title">
<h1><span class="hs_cos_wrapper hs_cos_wrapper_meta_field hs_cos_wrapper_type_text" data-hs-cos-general-type="meta_field" data-hs-cos-type="text" id="hs_cos_wrapper_name" style="">A Tight Schedule: Spring, Kubernetes, and Scheduled Jobs</span></h1>
</div>
</div>
<div class="hs_date_t2">
              02.23.2023 |
              
              
              Kubernetes
              
              Spring
              
              Spring Boot
              
              Scheduling
              
              Shedlock
              
              Cronjob
              
               | <a href="https://focusedlabs.io/blog/author/travis-pennetti">
  Travis Pennetti
</a>
</div>
</div>
</div>
<div class="post_featured_image">
<img alt="A Tight Schedule: Spring, Kubernetes, and Scheduled Jobs" src="https://focusedlabs.io/hubfs/Imported%20sitepage%20images/AbdJxVI4J-UdUXhPWvxR38lsksbyio5b9r9MqkNhn_Sy0jvb-FG-rWdr8Q_pfS3XHGmxBh5cqgfWPY_CtYHhUWP7kA-NUp_PEJa_shZItRZ4mNYLq7eNAoDxPcTeuBInZyC9fs1cuCCjWP6vvNbBE.png"/>
</div>
<div class="blog_post_content">
<div class="blog_post_body">
<span class="hs_cos_wrapper hs_cos_wrapper_meta_field hs_cos_wrapper_type_rich_text" data-hs-cos-general-type="meta_field" data-hs-cos-type="rich_text" id="hs_cos_wrapper_post_body" style=""><div>
<div data-article-id="1384389" id="article-body">
<h4>TL;DR</h4>
Be wary of threading, locking, and job duration when using Spring Scheduler on an application deployed in Kubernetes to prevent duplicate and delayed job runs. If you’re not too far down the Spring Scheduler route, consider an alternate solution like<span> </span><a href="https://kubernetes.io/docs/concepts/workloads/controllers/job/">Kubernetes CronJob</a>.
<h3><a href="https://dev.to/focusedlabs/a-tight-schedule-spring-kubernetes-and-scheduled-jobs-4lam#background" name="background"></a>Background</h3>
<p>My pair and I were tasked with implementing two daily jobs in our Spring Boot Application to email a set of users. Before jumping into solutions we outlined our problem constraints:</p>
<ul>
<li>Our Spring Boot Application is deployed on Kubernetes</li>
<li>The scheduled jobs
<ul>
<li>Need to run at a specific time</li>
<li>Have variable runtimes and usually run on the order of minutes</li>
<li>Share core application implementation and splitting out dependencies would introduce risk and complexity​</li>
</ul>
</li>
</ul>
<p>We narrowed down our solutions to<span> </span><a href="https://docs.spring.io/spring-framework/docs/3.2.x/spring-framework-reference/html/scheduling.html">Spring Scheduler</a><span> </span>and using a<span> </span><a href="https://kubernetes.io/docs/concepts/workloads/controllers/job/">Kubernetes CronJob</a>. We decided to start with Spring Scheduler because it was familiar and after adding a couple annotations we were up and running. The two jobs were scheduled to run at 11:00 and we added some logging so we could keep an eye on them:<br/>​</p>
<div>
<pre><code><span>@Scheduled</span><span>(</span><span>cron</span> <span>=</span> <span>"0 0 11 * * *"</span><span>)</span><br/><span>public</span> <span>void</span> <span>job1</span><span>()</span> <span>{</span><br/>    <span>System</span><span>.</span><span>out</span><span>.</span><span>println</span><span>(</span><span>"Running job1."</span><span>);</span><br/>    <span>sendEmails</span><span>();</span><br/><span>}</span><br/><span>​</span><br/><span>@Scheduled</span><span>(</span><span>cron</span> <span>=</span> <span>"0 0 11 * * *"</span><span>)</span><br/><span>public</span> <span>void</span> <span>job2</span><span>()</span> <span>{</span><br/>    <span>System</span><span>.</span><span>out</span><span>.</span><span>println</span><span>(</span><span>"Running job2."</span><span>);</span><br/>    <span>sendMoreEmails</span><span>();</span><br/><span>}</span><br/></code></pre>
<div>
<div><svg height="20px" viewbox="0 0 24 24" width="20px" xmlns="http://www.w3.org/2000/svg"><path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"> </path></svg></div>
</div>
</div>
<p>​<br/>We pushed the changes and discussed our testing strategy while we waited for our new jobs to run. Our initial test would be to check the logs for entries related to the scheduled jobs. We needed to verify that each job:</p>
<ol>
<li>Ran at the configured time (11 AM)</li>
<li>Ran exactly once​</li>
</ol>
<p>We’ll use a table to track our progress:<br/>​</p>
<div>
<table style="border-collapse: collapse; table-layout: fixed; margin-left: auto; margin-right: auto; border: 1px solid #99acc2;">
<thead>
<tr>
<th>Job</th>
<th>Ran at the configured time</th>
<th>Ran exactly once</th>
</tr>
</thead>
<tbody>
<tr>
<td>job1</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td>job2</td>
<td>-</td>
<td>-</td>
</tr>
</tbody>
</table>
</div>
<h3><a href="https://dev.to/focusedlabs/a-tight-schedule-spring-kubernetes-and-scheduled-jobs-4lam#the-problem" name="the-problem"></a>The Problem</h3>
<p>When we checked the logs later that day we found that the job had run; however, we saw that there were two log entries for both jobs! We also noticed that the second job (“job2”) had started slightly after 11:00 in both cases:<br/>​</p>
<div>
<pre><code>2023-01-15 11:00:00.000  [   scheduling-1] [pod-1] : Running job1.<br/>2023-01-15 11:00:00.000  [   scheduling-1] [pod-2] : Running job1.<br/>2023-01-15 11:07:42.915  [   scheduling-1] [pod-1] : Running job2.<br/>2023-01-15 11:08:03.792  [   scheduling-1] [pod-2] : Running job2</code>​</pre>
</div>
<p>Our test results:<br/>​</p>
<div>
<table style="border-collapse: collapse; table-layout: fixed; margin-left: auto; margin-right: auto; border: 1px solid #99acc2;">
<thead>
<tr>
<th>Job</th>
<th>Ran at the configured time</th>
<th>Ran exactly once</th>
</tr>
</thead>
<tbody>
<tr>
<td>job1</td>
<td>✅</td>
<td>❌</td>
</tr>
<tr>
<td>job2</td>
<td>✅</td>
<td>❌</td>
</tr>
</tbody>
</table>
</div>
<p>​</p>
<p>We learned two things from the logs:</p>
<ol>
<li>The duplicate entries were from different application instances (based on the pod name in the log context)</li>
<li>The jobs on each instance were running on the same thread “scheduling-1”​</li>
</ol>
<p>Weird. Down the rabbit hole we go!<br/>​</p>
<div><button aria-label="Pause animation playback" aria-pressed="false" type="button"><svg height="24" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10ZM9 9v6h2V9H9Zm4 0v6h2V9h-2Z"></path></svg>GIF</button><canvas height="300" width="400"></canvas><img alt="" data-animated="true" data-mce-paste="true" height="300" id="animated-0" loading="lazy" src="https://res.cloudinary.com/practicaldev/image/fetch/s--Op1e2o1z--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://lh6.googleusercontent.com/pMxWdYc94129gXSd5Ra-q8XIgu35J0VaRQ3OhHijbobHVIGJA5V7scoQeY2lwSgVaRLnXG9KHi-fIkrqXf-Hn1cCXn3ZWGjrIHVvruMpxThP9CeQC8PVoDeQLKljJsPw5N4TA-E6WW2rCCJpoTTHqvPSFbz8JZoFkm2Cupv0a1rCJb_qqADxfqnT0cYXCQ" width="400"/></div>
<br/>​
<p> </p>
<h3><a href="https://dev.to/focusedlabs/a-tight-schedule-spring-kubernetes-and-scheduled-jobs-4lam#duplicate-job-runs" name="duplicate-job-runs"></a>Duplicate Job Runs</h3>
<p>Since we only had two application instances deployed in our development environment we guessed that it was running the scheduled jobs on each instance. We verified this by increasing and decreasing the number of pods and checking our logs.<br/>​<br/>A quick search on Stack Overflow told us<span> </span><a href="https://stackoverflow.com/questions/31288810/spring-scheduled-task-running-in-clustered-environment">we weren’t</a><span> </span><a href="https://stackoverflow.com/questions/49533543/spring-and-scheduled-tasks-on-multiple-instances">the first ones</a><span> </span>to encounter the problem of running a scheduled job in an application deployed in Kubernetes. After looking at some solutions and chatting with colleagues we decided to check out a locking solution called<span> </span><a href="https://github.com/lukas-krecan/ShedLock">ShedLock</a>. Briefly, ShedLock maintains a database table that can be used as a lock amongst application instances. We’re going to gloss over ShedLock configuration because many folks have already<span> </span><a href="https://www.notion.so/f49c78bfef9349629ced849e83f83284">covered it in depth</a>. Once configured, the first application instance to run the job will create a lock to prevent any other instance from running the same job. When the job is done or the max lock time is reached, the lock is released.<br/>​<br/>Here’s what our job looks like with the ShedLock annotations (“@ScheduledLock”), minimum lock time (“lockAtLeastFor”), and maximum lock time (“lockAtMostFor”):<br/>​</p>
<div>
<pre><code><span>@Scheduled</span><span>(</span><span>cron</span> <span>=</span> <span>"0 0 11 * * *"</span><span>)</span><br/><span>@SchedulerLock</span><span>(</span><span>name</span> <span>=</span> <span>"job1"</span><span>,</span> <span>lockAtLeastFor</span> <span>=</span> <span>"PT5m"</span><span>,</span> <span>lockAtMostFor</span> <span>=</span> <span>"PT10m"</span><span>)</span><br/><span>public</span> <span>void</span> <span>job1</span><span>()</span> <span>{</span><br/>    <span>System</span><span>.</span><span>out</span><span>.</span><span>println</span><span>(</span><span>"Running job1."</span><span>);</span><br/>    <span>sendEmails</span><span>();</span><br/><span>}</span><br/><span>​</span><br/><span>@Scheduled</span><span>(</span><span>cron</span> <span>=</span> <span>"0 0 11 * * *"</span><span>)</span><br/><span>@SchedulerLock</span><span>(</span><span>name</span> <span>=</span> <span>"job2"</span><span>,</span> <span>lockAtLeastFor</span> <span>=</span> <span>"PT5m"</span><span>,</span> <span>lockAtMostFor</span> <span>=</span> <span>"PT10m"</span><span>)</span><br/><span>public</span> <span>void</span> <span>job2</span><span>()</span> <span>{</span><br/>    <span>System</span><span>.</span><span>out</span><span>.</span><span>println</span><span>(</span><span>"Running job2."</span><span>);</span><br/>    <span>sendMoreEmails</span><span>();</span><br/><span>}</span></code>​</pre>
</div>
<p><em>Note: We’ll come back to the “lockAtLeastFor” and “lockAtMostFor” values in a bit…</em><br/>​<br/>We deployed the changes and checked the logs again:<br/>​</p>
<div>
<pre><code>2023-01-16 11:00:00.000  [   scheduling-1] [pod-1] : Running job1.<br/>2023-01-16 11:00:00.000  [   scheduling-1] [pod-2] : Running job2.<br/>2023-01-16 11:08:03.206  [   scheduling-1] [pod-2] : Running job1.</code>​</pre>
</div>
<p>Duplicate logs again! However, this time it was only for one of the jobs - progress!<br/>​</p>
<div>
<table style="border-collapse: collapse; table-layout: fixed; margin-left: auto; margin-right: auto; border: 1px solid #99acc2;">
<thead>
<tr>
<th>Job</th>
<th>Ran at the configured time</th>
<th>Ran exactly once</th>
</tr>
</thead>
<tbody>
<tr>
<td>job1</td>
<td>✅</td>
<td>❌</td>
</tr>
<tr>
<td>job2</td>
<td>❌</td>
<td>✅</td>
</tr>
</tbody>
</table>
</div>
<p>​</p>
<h3><a href="https://dev.to/focusedlabs/a-tight-schedule-spring-kubernetes-and-scheduled-jobs-4lam#the-duration-of-the-lock" name="the-duration-of-the-lock"></a>The Duration of the Lock</h3>
<p>My pair and I were stuck so we drew a diagram to plot the series of events:<br/>​<br/><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--NQ8RoPKs--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i.imgur.com/3A52FLg.jpg"><img alt="" data-mce-paste="true" height="369" loading="lazy" src="https://res.cloudinary.com/practicaldev/image/fetch/s--NQ8RoPKs--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i.imgur.com/3A52FLg.jpg" width="880"/></a><br/>​<br/>Both jobs started at the same time and both locks were enabled. When “job1” finished, the lock was released. Meanwhile, “job2” was still running on the second instance with “job1” queued. Once “job2” finished, “job1” was dequeued and it was able to start because the lock was already released.<br/>​<br/>The solution for the lock being too short is to increase it to be longer than the other job. So the minimum lock time (“lockAtLeastFor”) for “job1” should be longer than “job2” would take and vice versa. Since our jobs were only being run once a day we were able to be liberal with the lock times - we locked it for a minimum of 15 hours and a maximum of 20 hours.<br/>​</p>
<div>
<pre><code><span>@Scheduled</span><span>(</span><span>cron</span> <span>=</span> <span>"0 0 11 * * *"</span><span>)</span><br/><span>@SchedulerLock</span><span>(</span><span>name</span> <span>=</span> <span>"job1"</span><span>,</span> <span>lockAtLeastFor</span> <span>=</span> <span>"PT15h"</span><span>,</span> <span>lockAtMostFor</span> <span>=</span> <span>"PT20h"</span><span>)</span><br/><span>public</span> <span>void</span> <span>job1</span><span>()</span> <span>{</span><br/>    <span>System</span><span>.</span><span>out</span><span>.</span><span>println</span><span>(</span><span>"Running job1."</span><span>);</span><br/>    <span>sendEmails</span><span>();</span><br/><span>}</span><br/><span>​</span><br/><span>@Scheduled</span><span>(</span><span>cron</span> <span>=</span> <span>"0 0 11 * * *"</span><span>)</span><br/><span>@SchedulerLock</span><span>(</span><span>name</span> <span>=</span> <span>"job2"</span><span>,</span> <span>lockAtLeastFor</span> <span>=</span> <span>"PT15h"</span><span>,</span> <span>lockAtMostFor</span> <span>=</span> <span>"PT20h"</span><span>)</span><br/><span>public</span> <span>void</span> <span>job2</span><span>()</span> <span>{</span><br/>    <span>System</span><span>.</span><span>out</span><span>.</span><span>println</span><span>(</span><span>"Running job2."</span><span>);</span><br/>    <span>sendMoreEmails</span><span>();</span><br/><span>}</span></code>​</pre>
</div>
<p>Now our timeline looks like this:<br/>​<br/><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--NSeiD8MV--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i.imgur.com/7BPnX4j.jpg"><img alt="" data-mce-paste="true" height="321" loading="lazy" src="https://res.cloudinary.com/practicaldev/image/fetch/s--NSeiD8MV--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i.imgur.com/7BPnX4j.jpg" width="880"/></a><br/>​<br/>Locking for 15 hours is overkill for our eight minute job but my pair and I agreed that in general the lock times should be maximized to the frequency to reduce the chance of them running multiple times. Our take is that if your job runs every minute then it should be locked for 59 seconds, if it runs every hour then lock it for 59 minutes, and so on.<br/>​<br/>We deployed and checked the logs again:<br/>​</p>
<div>
<pre><code>2023-01-16 11:00:00.000  [   scheduling-1] [pod-1] : Running job1.<br/>2023-01-16 11:00:00.000  [   scheduling-1] [pod-2] : Running job2.</code>​</pre>
</div>
<div>
<table style="border-collapse: collapse; table-layout: fixed; margin-left: auto; margin-right: auto; border: 1px solid #99acc2;">
<thead>
<tr>
<th>Job</th>
<th>Ran at the configured time</th>
<th>Ran exactly once</th>
</tr>
</thead>
<tbody>
<tr>
<td>job1</td>
<td>✅</td>
<td>✅</td>
</tr>
<tr>
<td>job2</td>
<td>✅</td>
<td>✅</td>
</tr>
</tbody>
</table>
</div>
<p>Success!<br/>​</p>
<div><button aria-label="Pause animation playback" aria-pressed="false" type="button"><svg height="24" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10ZM9 9v6h2V9H9Zm4 0v6h2V9h-2Z"></path></svg>GIF</button><canvas height="458" width="480"></canvas><img alt="" data-animated="true" data-mce-paste="true" height="458" id="animated-1" loading="lazy" src="https://res.cloudinary.com/practicaldev/image/fetch/s--DssjKjwk--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://lh3.googleusercontent.com/aOZh1eXyNS1wQpLUi_NmAWFkN_M6E4vHSSh7h3IOhGbHxdIbOeyWKCKRHyKiiO6QhklDbcQH9TW6WixbztWAxzLXS02hJeJVLWnXxEmZOQcbACaRsQMd4m6zjhL-LlqwCKrqtmwuhC357Jx4ErD32cZLXSBXHGHapwJI9h5FslEN1yBZmt1ORpEFUlWh7A" width="480"/></div>
<br/>​
<p> </p>
<h3><a href="https://dev.to/focusedlabs/a-tight-schedule-spring-kubernetes-and-scheduled-jobs-4lam#scheduled-jobs-on-same-thread" name="scheduled-jobs-on-same-thread"></a>Scheduled Jobs on Same Thread</h3>
<p>​<br/>We had solved the duplicate runs with locking but my pair and I were still hung up on the jobs running on the same thread. Our solution wasn’t foolproof because adding another job would still cause a job to be queued behind another. This means that a third job would run after another rather than at the scheduled time:<br/>​<br/><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--5y39b9Bv--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i.imgur.com/EmDRZQq.jpg"><img alt="" data-mce-paste="true" height="386" loading="lazy" src="https://res.cloudinary.com/practicaldev/image/fetch/s--5y39b9Bv--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i.imgur.com/EmDRZQq.jpg" width="880"/></a><br/>​<br/>More generally, the queueing issue occurs whenever there are more scheduled jobs than application instances. After reading some thrilling Spring documentation we learned that<span> </span><a href="https://docs.spring.io/spring-framework/docs/3.2.x/spring-framework-reference/html/scheduling.html">Spring Scheduler is configured to use a single thread by default</a>. The fix was to increase the threads allocated to the scheduler:<br/>​</p>
<div>
<pre><code><span>@Configuration</span><br/><span>public</span> <span>class</span> <span>SchedulingConfigurerConfiguration</span> <span>implements</span> <span>SchedulingConfigurer</span> <span>{</span><br/><span>​</span><br/>        <span>@Override</span><br/>        <span>public</span> <span>void</span> <span>configureTasks</span><span>(</span><span>ScheduledTaskRegistrar</span> <span>taskRegistrar</span><span>)</span> <span>{</span><br/>                <span>ThreadPoolTaskScheduler</span> <span>taskScheduler</span> <span>=</span> <span>new</span> <span>ThreadPoolTaskScheduler</span><span>();</span><br/>                <span>// Set thread pool size to 10</span><br/>                <span>taskScheduler</span><span>.</span><span>setPoolSize</span><span>(</span><span>10</span><span>);</span><br/>                <span>taskScheduler</span><span>.</span><span>initialize</span><span>();</span><br/>                <span>taskRegistrar</span><span>.</span><span>setTaskScheduler</span><span>(</span><span>taskScheduler</span><span>);</span><br/>        <span>}</span><br/><span>}</span></code></pre>
</div>
<p>Now that the scheduler has more threads we can avoid queuing jobs and each will start at the configured time. Once a job has started, the lock is put in place preventing any other application instance from starting the same job:<br/>​<br/><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--A9reozsF--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i.imgur.com/pACI5mz.jpg"><img alt="" data-mce-paste="true" height="321" loading="lazy" src="https://res.cloudinary.com/practicaldev/image/fetch/s--A9reozsF--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i.imgur.com/pACI5mz.jpg" width="880"/></a><br/>​<br/>My pair and I agreed that the safest route was to configure locking<span> </span><em>and</em><span> </span>increase the number of threads. By using both solutions, we minimize the chance of any job being run more than once or not being run at the correct time.<br/>​</p>
<h3><a href="https://dev.to/focusedlabs/a-tight-schedule-spring-kubernetes-and-scheduled-jobs-4lam#conclusion" name="conclusion"></a>Conclusion</h3>
<p>My pair and I learned a lot about the pitfalls of Spring Scheduler and how running jobs in Kubernetes introduces new complexity. Between threading, locking, job duration, and application instances there are a lot of potential snags that you may hit along the way. Hopefully our discoveries help at least a couple folks navigate implementation.<a href="https://dev.to/focusedlabs/a-tight-schedule-spring-kubernetes-and-scheduled-jobs-4lam#%E2%80%8B" name="%E2%80%8B"></a>​</p>
<h3><a href="https://dev.to/focusedlabs/a-tight-schedule-spring-kubernetes-and-scheduled-jobs-4lam#references" name="references"></a>References</h3>
<ul>
<li><a href="https://stackoverflow.com/a/49533618/20514850">https://stackoverflow.com/a/49533618/20514850</a></li>
<li><a href="https://levelup.gitconnected.com/solving-multiple-executions-of-scheduled-tasks-across-multiple-nodes-even-with-shedlock-spring-2b1d26db9356">https://levelup.gitconnected.com/solving-multiple-executions-of-scheduled-tasks-across-multiple-nodes-even-with-shedlock-spring-2b1d26db9356</a></li>
<li><a href="https://www.baeldung.com/shedlock-spring">https://www.baeldung.com/shedlock-spring</a></li>
<li><a href="https://dhananjay4058.medium.com/lock-scheduled-tasks-with-shedlock-and-spring-boot-f67200dad675">https://dhananjay4058.medium.com/lock-scheduled-tasks-with-shedlock-and-spring-boot-f67200dad675</a></li>
<li><a href="https://kubernetes.io/docs/concepts/workloads/controllers/cron-jobs/">https://kubernetes.io/docs/concepts/workloads/controllers/cron-jobs/</a></li>
</ul>
</div>
</div></span>
</div>
</div>
<div class="post_share">
<div class="post_share_title">
<p>Share</p>
</div>
<div class="post_share_icons">
<div class="post_share_links">
<a href="http://www.facebook.com/share.php?u=https://focusedlabs.io/blog/a-tight-schedule-spring-kubernetes-and-scheduled-jobs" onclick="window.open('http://www.facebook.com/share.php?u=https://focusedlabs.io/blog/a-tight-schedule-spring-kubernetes-and-scheduled-jobs', 'newwindow', 'width=530,height=600,toolbar=no,directories=no,status=no,menubar=no,scrollbars=yes,copyhistory=no,resizable=yes'); return false;" target="_self">
<svg fill="none" height="16" viewbox="0 0 16 16" width="16" xmlns="http://www.w3.org/2000/svg">
<path d="M14.6652 0.491943H1.32043C0.863495 0.492218 0.493073 0.862824 0.493164 1.31995V14.6647C0.493439 15.1216 0.864044 15.492 1.32117 15.4919H8.50586V9.69116H6.55762V7.42065H8.50586V5.74973C8.50586 3.81201 9.68881 2.75732 11.4173 2.75732C12.2452 2.75732 12.9567 2.81903 13.1641 2.84659V4.87183H11.9721C11.0317 4.87183 10.8496 5.3187 10.8496 5.97458V7.42065H13.0981L12.8052 9.69116H10.8496V15.4919H14.6652C15.1224 15.492 15.4931 15.1215 15.4932 14.6643C15.4932 14.6642 15.4932 14.6641 15.4932 14.6639V1.31921C15.493 0.862274 15.1223 0.491852 14.6652 0.491943Z" fill="#2B2340" fill-opacity="0.8"></path>
</svg>
</a>
<a href="javascript:;" onclick="window.open('https://twitter.com/intent/tweet?url=https://focusedlabs.io/blog/a-tight-schedule-spring-kubernetes-and-scheduled-jobs&amp;text=A Tight Schedule: Spring, Kubernetes, and Scheduled Jobs','newwindow', 'width=530,height=600,toolbar=no,directories=no,status=no,menubar=no,scrollbars=yes,copyhistory=no,resizable=yes'); return false;" target="_self" title="twitter">
<svg height="16" viewbox="0 0 16 16" width="16" xmlns="http://www.w3.org/2000/svg">
<g clip-path="url(#clip0)">
<path class='text-text text-opacity-80 "fill-current"' d="M15.5278 3.1399C15.4489 3.16295 15.37 3.1844 15.2911 3.20438C14.809 3.32613 14.7646 3.16548 15.1137 2.81104C15.2701 2.65221 15.4082 2.47946 15.5282 2.29288C15.797 1.87449 15.5638 1.69203 15.1063 1.88747C14.9432 1.95719 14.7773 2.0204 14.6091 2.07676C14.1377 2.23505 13.4688 1.99627 13.0488 1.72988C12.5186 1.39362 11.916 1.22559 11.2408 1.22559C10.295 1.22559 9.48891 1.55913 8.82196 2.2257C8.15522 2.89261 7.82167 3.69896 7.82167 4.64448C7.82167 4.77379 7.82906 4.90508 7.84366 5.03818C7.86761 5.25484 7.50272 5.4119 7.01032 5.34236C5.94517 5.19198 4.93317 4.86923 3.97412 4.37447C3.02298 3.88386 2.18352 3.26648 1.45589 2.52228C1.10807 2.1666 0.637649 2.19724 0.507779 2.67737C0.429969 2.96518 0.39127 3.26451 0.39127 3.57539C0.39127 4.16126 0.52885 4.70464 0.804069 5.20551C0.940943 5.45478 1.10124 5.68044 1.28532 5.88235C1.59494 6.22222 1.54756 6.41943 1.11657 6.29859C0.685765 6.17776 0.370052 5.99836 0.370052 6.01007C0.370052 6.02178 0.370052 6.03132 0.370052 6.03132C0.370052 6.85674 0.629232 7.58201 1.14792 8.20643C1.46742 8.59113 1.83861 8.8883 2.26133 9.0976C2.70709 9.3184 2.91474 9.44156 2.66547 9.47382C2.51509 9.49327 2.3638 9.50298 2.21162 9.50298C2.10862 9.50298 2.00056 9.4983 1.88782 9.48877C1.70951 9.47364 1.67746 9.84518 1.94779 10.2627C2.16265 10.5944 2.43766 10.8864 2.77268 11.1385C3.11344 11.3952 3.48068 11.5794 3.87382 11.6916C4.35219 11.828 4.44819 12.0764 4.02167 12.3321C2.96627 12.9654 1.79829 13.282 0.517932 13.282C0.373672 13.282 0.236063 13.2787 0.104604 13.2724C-0.123588 13.2615 0.0295014 13.4624 0.470022 13.6931C1.84656 14.4141 3.33728 14.7743 4.94238 14.7743C6.15594 14.7743 7.29563 14.5822 8.36131 14.1976C9.42661 13.8131 10.337 13.2978 11.092 12.6521C11.847 12.0065 12.4981 11.2639 13.0451 10.424C13.5919 9.58423 13.9993 8.70746 14.2677 7.79381C14.5356 6.87996 14.6698 5.96431 14.6698 5.04686C14.6698 4.9642 14.6691 4.88998 14.6679 4.82462C14.6653 4.70178 14.9902 4.36929 15.353 4.0291C15.5167 3.87548 15.6728 3.71427 15.822 3.54517C16.151 3.17178 16.0053 3.00068 15.5278 3.1399Z"></path>
</g>
<defs>
<clippath id="clip0">
<rect height="16" width="16"></rect>
</clippath>
</defs>
</svg>
</a>
<a href="http://www.linkedin.com/shareArticle?mini=true&amp;url=https://focusedlabs.io/blog/a-tight-schedule-spring-kubernetes-and-scheduled-jobs" onclick="window.open('http://www.linkedin.com/shareArticle?mini=true&amp;url=https://focusedlabs.io/blog/a-tight-schedule-spring-kubernetes-and-scheduled-jobs', 'newwindow', 'width=530,height=600,toolbar=no,directories=no,status=no,menubar=no,scrollbars=yes,copyhistory=no,resizable=yes'); return false;" target="_self"><svg fill="none" height="16" viewbox="0 0 16 16" width="16" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0)"><path class='text-text text-opacity-80 "fill-current"' d="M15.9968 15.9995V15.9988H16.0008V10.1308C16.0008 7.26016 15.3828 5.04883 12.0268 5.04883C10.4135 5.04883 9.33082 5.93416 8.88882 6.77349H8.84216V5.31683H5.66016V15.9988H8.97349V10.7095C8.97349 9.31683 9.23749 7.97016 10.9622 7.97016C12.6615 7.97016 12.6868 9.55949 12.6868 10.7988V15.9995H15.9968Z"></path><path class='text-text text-opacity-80 "fill-current"' d="M0.264648 5.31738H3.58198V15.9994H0.264648V5.31738Z"></path><path class='text-text text-opacity-80 "fill-current"' d="M1.92133 0C0.860667 0 0 0.860667 0 1.92133C0 2.982 0.860667 3.86067 1.92133 3.86067C2.982 3.86067 3.84267 2.982 3.84267 1.92133C3.842 0.860667 2.98133 0 1.92133 0V0Z"></path></g><defs><clippath id="clip0"><rect fill="white" height="16" width="16"></rect></clippath></defs></svg></a>
</div>
</div>
</div>
</div>
</div>
<div class="cm_rp_wrp">
<div class="cm_rp_inner">
<div class="cm_rp_header">
<div class="cm_rp_title">
<p>Read More</p>
</div>
<div class="cm_rp_subtitle">
<h2>Related Posts</h2>
</div>
</div>
<div class="cm_rp_list">
<a href="https://focusedlabs.io/blog/how-to-quickly-delete-multiple-jobs-in-kubernetes">
<div class="cm_rec__t2_image">
<div class="cm_rec_t2__img">
<div class="cm_rec_t2__img_inner">
<img alt="How to quickly delete multiple jobs in kubernetes" src="https://focusedlabs.io/hubfs/FocusedLabs_November_2022/Images/fbb33ff29f7f41e44d651618b1a683abe4b20c78-1000x420.jpg"/>
</div>
</div>
</div>
<div class="cm_rec_content_t2">
<div class="hs_date_t2">01.21.2021
                
                
                | Devops
                
                 | Katy G
              </div>
<div class="hs_rec_sml_title">
<h3>
                  How to quickly delete multiple jobs in kubernetes
                </h3>
</div>
</div>
</a>
<a href="https://focusedlabs.io/blog/cancelling-a-stripe-subscription-on-period-end">
<div class="cm_rec__t2_image">
<div class="cm_rec_t2__img">
<div class="cm_rec_t2__img_inner">
<img alt="Cancelling a stripe subscription on 'period end'" src="https://focusedlabs.io/hubfs/FocusedLabs_November_2022/Images/b6da07023136a295fc5e6cc3bffe28d3a7108871-1000x420.jpg"/>
</div>
</div>
</div>
<div class="cm_rec_content_t2">
<div class="hs_date_t2">01.17.2021
                
                
                | Tutorial
                
                | Backend
                
                 | Katy G
              </div>
<div class="hs_rec_sml_title">
<h3>
                  Cancelling a stripe subscription on 'period end'
                </h3>
</div>
</div>
</a>
<a href="https://focusedlabs.io/blog/the-no-nonsense-guide-to-jvm-14-memory-on-kubernetes-508m">
<div class="cm_rec__t2_image">
<div class="cm_rec_t2__img">
<div class="cm_rec_t2__img_inner">
<img alt="The No-Nonsense Guide to JVM 14 Memory on Kubernetes" src="https://focusedlabs.io/hubfs/FocusedLabs_November_2022/Images/8d4e0e0849522adc929b03f6c4bb6c4ff8e5d77d-1000x420.png"/>
</div>
</div>
</div>
<div class="cm_rec_content_t2">
<div class="hs_date_t2">09.22.2020
                
                
                | Devops
                
                 | James McMahon
              </div>
<div class="hs_rec_sml_title">
<h3>
                  The No-Nonsense Guide to JVM 14 Memory on Kubernetes
                </h3>
</div>
</div>
</a>
<a href="https://focusedlabs.io/blog/sentry-with-spring-boot-the-better-way">
<div class="cm_rec__t2_image">
<div class="cm_rec_t2__img">
<div class="cm_rec_t2__img_inner">
<img alt="Sentry with Spring Boot (The Better Way)" src="https://focusedlabs.io/hubfs/FocusedLabs_November_2022/Images/9ba3b6ee24561f7bfdf47638162787e28928c758-1000x420.png"/>
</div>
</div>
</div>
<div class="cm_rec_content_t2">
<div class="hs_date_t2">08.24.2020
                
                
                | Devops
                
                | Tutorial
                
                | Backend
                
                 | James McMahon
              </div>
<div class="hs_rec_sml_title">
<h3>
                  Sentry with Spring Boot (The Better Way)
                </h3>
</div>
</div>
</a>
<a href="https://focusedlabs.io/blog/sentry-with-spring-boot">
<div class="cm_rec__t2_image">
<div class="cm_rec_t2__img">
<div class="cm_rec_t2__img_inner">
<img alt="Sentry with Spring Boot" src="https://focusedlabs.io/hubfs/FocusedLabs_November_2022/Images/9995591c43c050fbfc25beacd8db1cc3d6eb7b75-600x315.png"/>
</div>
</div>
</div>
<div class="cm_rec_content_t2">
<div class="hs_date_t2">07.07.2020
                
                
                | Devops
                
                | Backend
                
                 | James McMahon
              </div>
<div class="hs_rec_sml_title">
<h3>
                  Sentry with Spring Boot
                </h3>
</div>
</div>
</a>
<a href="https://focusedlabs.io/blog/echo-cancellation-with-web-audio-api-and-chromium">
<div class="cm_rec__t2_image">
<div class="cm_rec_t2__img">
<div class="cm_rec_t2__img_inner">
<img alt="Echo Cancellation with Web Audio Api and Chromium" src="https://focusedlabs.io/hubfs/FocusedLabs_November_2022/Images/21c764a3167c677447679206de9557be14b35893-799x318.jpg"/>
</div>
</div>
</div>
<div class="cm_rec_content_t2">
<div class="hs_date_t2">11.17.2020
                
                
                | Frontend
                
                 | Katy G
              </div>
<div class="hs_rec_sml_title">
<h3>
                  Echo Cancellation with Web Audio Api and Chromium
                </h3>
</div>
</div>
</a>
<a href="https://focusedlabs.io/blog/pivotal-web-services-ssl-and-a-custom-domain">
<div class="cm_rec__t2_image">
<div class="cm_rec_t2__img">
<div class="cm_rec_t2__img_inner">
<img alt="Pivotal Web Services, SSL, and a Custom Domain" src="https://focusedlabs.io/hubfs/FocusedLabs_November_2022/Images/6cc37a10f49fc6d866397076435adbd918d58d6d-3149x2103.jpg"/>
</div>
</div>
</div>
<div class="cm_rec_content_t2">
<div class="hs_date_t2">01.01.2020
                
                
                | Devops
                
                 | Austin Vance
              </div>
<div class="hs_rec_sml_title">
<h3>
                  Pivotal Web Services, SSL, and a Custom Domain
                </h3>
</div>
</div>
</a>
</div>
</div>
</div>
</div>
</main>
<div data-global-resource-path="FocusedLabs_November_2022/templates/partials/footer.html"><footer class="footer">
<div class="ft_img_left_wrp">
<div class="ft_img_left_inner">
<div class="ft_img_left">
<div class="hs_cos_wrapper hs_cos_wrapper_widget hs_cos_wrapper_type_module widget-type-linked_image" data-hs-cos-general-type="widget" data-hs-cos-type="module" id="hs_cos_wrapper_left_image" style="">
<span class="hs_cos_wrapper hs_cos_wrapper_widget hs_cos_wrapper_type_linked_image" data-hs-cos-general-type="widget" data-hs-cos-type="linked_image" id="hs_cos_wrapper_left_image_" style=""><img alt="accent" class="hs-image-widget" src="https://focusedlabs.io/hubfs/raw_assets/public/FocusedLabs_November_2022/images/footer_left_bg.png" style="width:0px;border-width:0px;border:0px;" title="accent" width="0"/></span></div>
</div>
</div>
</div>
<div class="ft_img_top">
<div class="ft_img_top_inner">
<div class="ft_img_top_img">
<div class="hs_cos_wrapper hs_cos_wrapper_widget hs_cos_wrapper_type_module widget-type-linked_image" data-hs-cos-general-type="widget" data-hs-cos-type="module" id="hs_cos_wrapper_top_image" style="">
<span class="hs_cos_wrapper hs_cos_wrapper_widget hs_cos_wrapper_type_linked_image" data-hs-cos-general-type="widget" data-hs-cos-type="linked_image" id="hs_cos_wrapper_top_image_" style=""><img alt="accent" class="hs-image-widget" src="https://focusedlabs.io/hubfs/raw_assets/public/FocusedLabs_November_2022/images/mobile_animated_imge.png" style="width:0px;border-width:0px;border:0px;" title="accent" width="0"/></span></div>
</div>
</div>
</div>
<div class="dnd-section">
<div class="hs_footer">
<div class="hs_ft_inner">
<div class="hs_ft_col">
<div class="hs_ft_logo">
<div class="hs_cos_wrapper hs_cos_wrapper_widget hs_cos_wrapper_type_module widget-type-logo" data-hs-cos-general-type="widget" data-hs-cos-type="module" id="hs_cos_wrapper_logo" style="">
<span class="hs_cos_wrapper hs_cos_wrapper_widget hs_cos_wrapper_type_logo" data-hs-cos-general-type="widget" data-hs-cos-type="logo" id="hs_cos_wrapper_logo_hs_logo_widget" style=""><a href="/" id="hs-link-logo_hs_logo_widget" style="border-width:0px;border:0px;"><img alt="FocusedLabs" class="hs-image-widget" height="377" src="https://focusedlabs.io/hubfs/raw_assets/public/FocusedLabs_November_2022/images/footer_logo.svg" style="height: auto;width:0px;border-width:0px;border:0px;" title="FocusedLabs" width="0"/></a></span>
</div>
</div>
<div class="footer_info">
<div class="hs_cos_wrapper hs_cos_wrapper_widget hs_cos_wrapper_type_module widget-type-rich_text" data-hs-cos-general-type="widget" data-hs-cos-type="module" id="hs_cos_wrapper_information" style=""><span class="hs_cos_wrapper hs_cos_wrapper_widget hs_cos_wrapper_type_rich_text" data-hs-cos-general-type="widget" data-hs-cos-type="rich_text" id="hs_cos_wrapper_information_" style=""><p>433 W Van Buren St<br \=""/>
Suite 1100-B<br \=""/>
Chicago, IL 60607<br \=""/>
<a href="tel:+17083038088">(708) 303-8088</a>
</p></span></div>
</div>
<div class="footer_info_link">
<a href="mailto:work@focusedlabs.io">work@focusedlabs.io</a>
</div>
</div>
<div class="hs_ft_col ft_2">
<span class="hs_cos_wrapper hs_cos_wrapper_widget hs_cos_wrapper_type_menu" data-hs-cos-general-type="widget" data-hs-cos-type="menu" id="hs_cos_wrapper_menu_1" style=""><div aria-label="Navigation Menu" class="hs-menu-wrapper active-branch no-flyouts hs-menu-flow-horizontal" data-menu-id="93462616833" data-sitemap-name="default" id="hs_menu_wrapper_menu_1" role="navigation">
<ul role="menu">
<li class="hs-menu-item hs-menu-depth-1 hs-item-has-children" role="none"><a aria-expanded="false" aria-haspopup="true" href="javascript:;" role="menuitem">COMPANY</a>
<ul class="hs-menu-children-wrapper" role="menu">
<li class="hs-menu-item hs-menu-depth-2" role="none"><a href="https://focusedlabs.io" role="menuitem">Home</a></li>
<li class="hs-menu-item hs-menu-depth-2" role="none"><a href="https://focusedlabs.io/about" role="menuitem">About</a></li>
<li class="hs-menu-item hs-menu-depth-2" role="none"><a href="https://focusedlabs.io/services" role="menuitem">Services</a></li>
<li class="hs-menu-item hs-menu-depth-2" role="none"><a href="https://focusedlabs.io/contact" role="menuitem">Contact Us</a></li>
<li class="hs-menu-item hs-menu-depth-2" role="none"><a href="https://focusedlabs.io/privacy-policy" role="menuitem">Privacy Policy</a></li>
</ul></li>
</ul>
</div></span>
</div>
<div class="hs_ft_col ft_3">
<span class="hs_cos_wrapper hs_cos_wrapper_widget hs_cos_wrapper_type_menu" data-hs-cos-general-type="widget" data-hs-cos-type="menu" id="hs_cos_wrapper_menu_2" style=""><div aria-label="Navigation Menu" class="hs-menu-wrapper active-branch no-flyouts hs-menu-flow-horizontal" data-menu-id="93463743912" data-sitemap-name="default" id="hs_menu_wrapper_menu_2" role="navigation">
<ul role="menu">
<li class="hs-menu-item hs-menu-depth-1 hs-item-has-children" role="none"><a aria-expanded="false" aria-haspopup="true" href="javascript:;" role="menuitem">EXPLORE</a>
<ul class="hs-menu-children-wrapper" role="menu">
<li class="hs-menu-item hs-menu-depth-2" role="none"><a href="https://focusedlabs.io/case-studies" role="menuitem">Case Studies</a></li>
<li class="hs-menu-item hs-menu-depth-2" role="none"><a href="https://focusedlabs.io/blog" role="menuitem">Blog</a></li>
<li class="hs-menu-item hs-menu-depth-2" role="none"><a href="https://focusedlabs.io/careers" role="menuitem">Careers</a></li>
</ul></li>
</ul>
</div></span>
</div>
<div class="fooer_sp"></div>
</div>
</div>
<div class="hs_bt_footer">
<div class="ft_copyright">
<div class="hs_cos_wrapper hs_cos_wrapper_widget hs_cos_wrapper_type_module widget-type-rich_text" data-hs-cos-general-type="widget" data-hs-cos-type="module" id="hs_cos_wrapper_copyright" style=""><span class="hs_cos_wrapper hs_cos_wrapper_widget hs_cos_wrapper_type_rich_text" data-hs-cos-general-type="widget" data-hs-cos-type="rich_text" id="hs_cos_wrapper_copyright_" style=""><p>© 2023 Focused Labs, All Rights Reserved.</p></span></div>
</div>
<div class="ft_social">
<div class="hs_cos_wrapper hs_cos_wrapper_widget hs_cos_wrapper_type_module" data-hs-cos-general-type="widget" data-hs-cos-type="module" id="hs_cos_wrapper_footer_icons" style=""><ul class="ft_icons">
<li>
<a href="https://www.facebook.com/withfocus">
<img alt="facebook" loading="lazy" src="https://focusedlabs.io/hubfs/FocusedLabs_November_2022/Images/facebook.svg"/>
</a>
</li>
<li>
<a href="https://twitter.com/BuildWithFocus">
<img alt="twitter" loading="lazy" src="https://focusedlabs.io/hubfs/FocusedLabs_November_2022/Images/twitter.svg"/>
</a>
</li>
<li>
<a href="https://www.linkedin.com/company/build-focused-labs/">
<img alt="linkedin" loading="lazy" src="https://focusedlabs.io/hubfs/FocusedLabs_November_2022/Images/linkedin.svg"/>
</a>
</li>
<li>
<a href="https://github.com/focused-labs">
<img alt="github" loading="lazy" src="https://focusedlabs.io/hubfs/FocusedLabs_November_2022/Images/github.svg"/>
</a>
</li>
</ul></div>
</div>
</div>
</div>
<div class="ft_img_right_wrp">
<div class="ft_img_right_inner">
<div class="ft_img_right">
<div class="hs_cos_wrapper hs_cos_wrapper_widget hs_cos_wrapper_type_module widget-type-linked_image" data-hs-cos-general-type="widget" data-hs-cos-type="module" id="hs_cos_wrapper_right_image" style="">
<span class="hs_cos_wrapper hs_cos_wrapper_widget hs_cos_wrapper_type_linked_image" data-hs-cos-general-type="widget" data-hs-cos-type="linked_image" id="hs_cos_wrapper_right_image_" style=""><img alt="accent" class="hs-image-widget" src="https://focusedlabs.io/hubfs/raw_assets/public/FocusedLabs_November_2022/images/footer_right_bg.png" style="width:0px;border-width:0px;border:0px;" title="accent" width="0"/></span></div>
</div>
</div>
</div>
</footer>
<div class="back_to_top">
<span class="back_top">
<svg class="block group-hover:scale-125 transform transition-transform" fill="none" height="24" width="24" xmlns="http://www.w3.org/2000/svg">
<path d="m17 11-5-5-5 5M17 18l-5-5-5 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path>
</svg>
</span>
</div></div>
</div>
<!-- HubSpot performance collection script -->
<script defer="" src="https://static.hsappstatic.net/content-cwv-embed/static-1.388/embed.js"></script>
<script src="https://focusedlabs.io/hs-fs/hub/5845897/hub_generated/template_assets/93429719598/1681240383335/FocusedLabs_November_2022/js/main.min.js"></script>
<script>
var hsVars = hsVars || {}; hsVars['language'] = 'en';
</script>
<script src="/hs/hsstatic/cos-i18n/static-1.53/bundles/project.js"></script>
<!-- Start of HubSpot Analytics Code -->
<script type="text/javascript">
var _hsq = _hsq || [];
_hsq.push(["setContentType", "blog-post"]);
_hsq.push(["setCanonicalUrl", "https:\/\/focusedlabs.io\/blog\/a-tight-schedule-spring-kubernetes-and-scheduled-jobs"]);
_hsq.push(["setPageId", "103693724996"]);
_hsq.push(["setContentMetadata", {
    "contentPageId": 103693724996,
    "legacyPageId": "103693724996",
    "contentFolderId": null,
    "contentGroupId": 93617369930,
    "abTestId": null,
    "languageVariantId": 103693724996,
    "languageCode": "en",
    
}]);
</script>
<script async="" defer="" id="hs-script-loader" src="/hs/scriptloader/5845897.js" type="text/javascript"></script>
<!-- End of HubSpot Analytics Code -->
<script type="text/javascript">
var hsVars = {
    render_id: "be0b3aa7-d44c-48f0-962f-3af5be742313",
    ticks: 1700477585786,
    page_id: 103693724996,
    
    content_group_id: 93617369930,
    portal_id: 5845897,
    app_hs_base_url: "https://app.hubspot.com",
    cp_hs_base_url: "https://cp.hubspot.com",
    language: "en",
    analytics_page_type: "blog-post",
    analytics_page_id: "103693724996",
    category_id: 3,
    folder_id: 0,
    is_hubspot_user: false
}
</script>
<script defer="" src="/hs/hsstatic/HubspotToolsMenu/static-1.191/js/index.js"></script>
<!-- Google Tag Manager (noscript) -->
<noscript><iframe height="0" src="https://www.googletagmanager.com/ns.html?id=GTM-NFKNBDPP" style="display:none;visibility:hidden" width="0"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_GB/all.js#xfbml=1&status=0";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="https://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
</body></html>